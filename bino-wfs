#!/usr/bin/env tclkit8.6.1
#
lappend auto_path lib

set Data zmx-models

package require acorn

    acorn::ZMX create Model source $Data/bino_wfs.ZMX

Model field set 1 x  0.25
Model field set 1 y  0

Model update

acorn::Rays create trak 32
acorn::Rays create ray1 1

    ray1 set px 0 py 0 pz 0 vignetted 0		; # Set up aray.
    ray1 angles : 0.25 0

Model trace ray1 {} current 0 trak

puts [Model 20 get x y]
puts ""
acorn::prays trak %.3f


#exit


puts ""
puts ""



puts "n	a	x	y"
puts "-	-	-	-"

foreach n [iota 1 12] {

    set a [expr ($n/12.0/2.0)]

    Model field set 1 x  $a
    Model field set 1 y  0

    Model update

    puts "$n	[format %.4f $a]	[join [lmap x [Model 20 get x y] { format %.4f $x }]  \t]"
}

#Model print



