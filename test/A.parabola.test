#!/usr/bin/env tclkit8.6
#
lappend auto_path ./lib ../lib arec/lib

package require acorn
package require tcltest

::tcltest::test GMT-1-rays-image { GMT-1 raytrace } -body {
    acorn::model Parabolic {
	surface A	{ R    0.0	K  0.0	n  1.00	thickness 	 200 }
	surface B	{ R -400.0	K -1.0	n -1.00	thickness	-200 }
	surface C	{ R    0.0	K  0.0	n  1.00	thickness	   0 }
    }

    Parabolic A set R 0

    acorn::mkrays rays nx 3 ny 3 box 25

    Parabolic print
    Parabolic trace rays

    acorn::rays-rms rays
} -cleanup { Parabolic destroy
} -result {1 1}

