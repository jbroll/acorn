#!/usr/bin/env tclkit8.6
#
lappend auto_path ./lib ../lib

package require acorn
package require tcltest

source util/rays.tcl

::tcltest::test GMT-1-rays-image { GMT-1 raytrace } -body {
    acorn::model Break {
	surface A	{ R    0.0	K  0.0	n  1.00	thickness 	 200 }
	surface B	{ R -400.0	K -1.0	n -1.00	thickness	-100 }

	coordbrk .	{ y 1 } 
	surface .	{ R    0.0	K  0.0	n  1.00	thickness	-100 }

	surface C	{ R    0.0	K  0.0	n  1.00	thickness	   0 }
    }
    #Break print

    acorn::mkrays rays nx 3 ny 3 box 25

    Break trace rays
    #acorn::prays rays

    acorn::rays-rms rays 1
} -cleanup { Break destroy
    	     rename rays {}
} -result {2.9007785717557725e-15 1.0 0.0 1.0 9}

